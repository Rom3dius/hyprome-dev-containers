FROM ghcr.io/ublue-os/ubuntu-toolbox:latest

ARG NEOVIM_REPO=https://github.com/Rom3dius/lazyvim-romedius

LABEL com.github.containers.toolbox="true" \
      usage="This image is meant to be used with the toolbox or distrobox command" \
      summary="A cloud-native terminal experience (for hyprome)" \
      maintainer="r@romedius.xyz"

# Copy the setup scripts and package list
COPY ../scripts/hyprome-dev/dev-shims.sh /
COPY ../scripts/hyprome-dev/dev.sh /
COPY ../packages/hyprome-dev.packages /

# Run the setup scripts
RUN chmod +x dev.sh dev-shims.sh && /dev.sh

# Install neovim dotfiles
RUN mkdir -p /etc/skel/.config/nvim
RUN git clone ${NEOVIM_REPO} /etc/skel/.config/nvim

RUN chmod 0755 /home

RUN rm /dev.sh /dev-shims.sh /hyprome-dev.packages
